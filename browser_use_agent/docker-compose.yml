version: '3.8'

services:
  browser-use-agent:
    platform: linux/amd64  # Cross-architecture support (works on x86_64 and ARM64/M1/M2)
    build: .
    env_file:
      - .env
    volumes:
      # Mount audit_logs for local screenshot storage when ENVIRONMENT=local
      - ./audit_logs:/app/audit_logs
    command: []  # Override with workflow-specific command

# Usage examples:
#
# Run test workflow:
#   docker-compose run browser-use-agent --workflow test_workflow.txt --tenant test
#
# Run sandbar workflow:
#   docker-compose run browser-use-agent \
#     --workflow sandbar.txt \
#     --tenant sandbar \
#     --email your.email@example.com \
#     --password your_password
